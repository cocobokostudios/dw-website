<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="https://www.davidwesst.com/_next/static/-9wn_hi6_-Q32OgH9YOcv/pages/_app.js" as="script"/><link rel="preload" href="https://www.davidwesst.com/_next/static/-9wn_hi6_-Q32OgH9YOcv/pages/blog/%5Bid%5D.js" as="script"/><link rel="preload" href="https://www.davidwesst.com/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="https://www.davidwesst.com/_next/static/chunks/framework.e84fa698c7ee940652bd.js" as="script"/><link rel="preload" href="https://www.davidwesst.com/_next/static/chunks/commons.7c101d7f1672b68d7c1c.js" as="script"/><link rel="preload" href="https://www.davidwesst.com/_next/static/runtime/main-98aa3916935decc0cde3.js" as="script"/></head><body><div id="__next"><h1>Custom Tasks for Java in Visual Studio Code</h1><article><div>custom-tasks-for-java-in-visual-studio-code</div><div>Wed Oct 14 2015 03:25:50 GMT-0500 (Central Daylight Time)</div><div><p>Now that I'm a Java Developer, I no longer worry about the bloating feeling I get when I need to open up the original Visual Studio. Now I worry about opening another instance of Eclipse. Don't get me wrong, Visual Studio and Eclipse are both great tools, but there are plenty of times where I don't need to bring a forklift just to move a single box.</p>
<!--more-->
<p>This is why I love Visual Studio Code.</p>
<p>That being said, we don't have native rich support for Java in Code. We <em>do</em> have syntax and bracket matching for Java, I wanted to see if I could compile and possibly display any errors directly in code.</p>
<p>We do that using <a href="https://code.visualstudio.com/docs/editor/tasks">Tasks</a>, and here's what I did:</p>
<h3>Configure a Task Runner</h3>
<p>To start you need a task runner for your project, which is where you will...you guessed it...configure tasks.</p>
<ol>
<li>Hit <code>Ctrl + Shift + P</code> to bring up the command palette. Search for "task" and you'll get the <em>Configure Task Runner</em> command. </li>
<li>Select it and press <code>Enter</code> to generate a tasks.json file.</li>
</ol>
<p><img src="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/configure-task-runner.png" alt="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/configure-task-runner.png"></p>
<p>The default <em>tasks.json</em> file has some samples along with some reference variables at the top of the file.</p>
<p>Next up, we create our task.</p>
<h3>Configure a Task</h3>
<p>To see if we have any errors, we want to run our Java compiler on our code to get any error. In the example below, I'm using a simple project with a <code>src</code> and a <code>target</code> directory where the <code>src</code> directory contains all of our Java files.</p>
<ol>
<li>First, clear out the other tasks in the file. We only want the one we're going to use which is our javac command.</li>
<li>Add the task to run the Java compiler</li>
</ol>
<p>{% codeblock lang:javascript %}
{
"version": "0.1.0",
"command": "javac",
"showOutput": "always",
"isShellCommand": true,
"args": ["-d","${workspaceRoot}\build\classes","${workspaceRoot}\src\main\java\*.java"]
}
{% endcodeblock %}</p>
<ol start="3">
<li>Now, we can run our command by hitting <code>Ctrl + Shift + P</code> and typing <em>Run Task</em> should show us our new Java task.</li>
</ol>
<p><img src="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/new-javac-task.png" alt="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/new-javac-task.png"></p>
<ol start="4">
<li>Select it to run it, and assuming you have an error, it should display something in the output window.</li>
</ol>
<p><img src="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/javac-output.png" alt="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/javac-output.png"></p>
<p>We're making progress, but it would be nice to see those errors inline in our code files, wouldn't it? That's where Problem Matchers come in.</p>
<h3>Add a Problem Matcher to your Task</h3>
<p>Now that we have a task running, we need to tell Code how to process the output. We do that using configuring a problem matcher that uses a regular expression to parse the output.</p>
<p>Here's what my task looks like now:</p>
<p>{% codeblock lang:javascript %}
{
"version": "0.1.0",
"command": "javac",
"showOutput": "silent",	// changed so that the output window doesn't pop up constantly
"isShellCommand": true,
"args": ["-d","${workspaceRoot}\target","${workspaceRoot}\src\*.java"],
"problemMatcher": {
"owner": "external",
"fileLocation": ["absolute"],
"pattern": [
{
"regexp": "^(.+\.java):(\d):(?:\s+(error)):(?:\s+(.*))$",
"file": 1,
"location": 2,
"severity": 3,
"message": 4
}
]
}
}
{% endcodeblock %}</p>
<p>If you'd like the full scoop on how this works, you can check out the explanation on the Code documentation on <a href="https://code.visualstudio.com/Docs/editor/tasks#_defining-a-problem-matcher">writing problem matchers</a> but basically each of the variables listed beneath the <code>regexp</code> represent a part of the VS code message that should display.</p>
<p>Now that I've updated my task. If we run it again by hitting <code>Ctrl + P</code> and typing <em>task javac</em> we should get the following:</p>
<p><img src="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-inline.png" alt="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-inline.png"></p>
<p>...and if we bring up our warnings by hitting <code>Ctrl + Shift + M</code> we should see:</p>
<p><img src="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-warning.png" alt="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-warning.png"></p>
<p>Click on the warning, should bring you to the file with the error in it.</p>
<h2>Hey, Why Can't I Add More Tasks to tasks.json?</h2>
<p>Great question! Although I don't have an official answer, here's my opinion: <strong>It's a bad idea</strong>.</p>
<p>The <code>tasks.json</code> file is an IDE specific configuration file. All it's really doing to making shortcuts through your IDE to execute different commands from the command line. So rather than setup multiple tasks for each individual command, you should do yourself and your project a favour and setup a build script and use that in your tasks.json file.</p>
<p>A build script will have all the commands and scripts you need to run, build, test, or do whatever to your project. Plus, it's usable <em>outside</em> of Code, so it's much more useful.</p>
<p>Although totally customizable (which I'll cover in <a href="http://westerndevs.com/using-java-build-script-tasks-in-visual-studio-code/">an upcoming post</a>), you can see this action now if you're using <a href="https://code.visualstudio.com/Docs/editor/tasks#_mapping-gulp-grunt-and-jake-output-to-problem-matchers">Gulp, Grunt, or Jake</a> in your existing projects.</p>
<hr>
<p>Thanks for playing. ~ DW</p>
<h5>References</h5>
<ol>
<li><a href="https://code.visualstudio.com/Docs/editor/tasks">Tasks in Visual Studio Code</a></li>
<li><a href="https://code.visualstudio.com/docs/editor/tasks_appendix">tasks.json Schema reference</a></li>
<li><a href="https://code.visualstudio.com/Docs/editor/tasks#_mapping-gulp-grunt-and-jake-output-to-problem-matchers">Mapping Gulp, Grunt and Jake Output to Problem Matchers</a></li>
</ol>
</div></article><footer><a href="/blog">Back to Post Listing</a></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"custom-tasks-for-java-in-visual-studio-code","htmlContent":"\u003cp\u003eNow that I'm a Java Developer, I no longer worry about the bloating feeling I get when I need to open up the original Visual Studio. Now I worry about opening another instance of Eclipse. Don't get me wrong, Visual Studio and Eclipse are both great tools, but there are plenty of times where I don't need to bring a forklift just to move a single box.\u003c/p\u003e\n\u003c!--more--\u003e\n\u003cp\u003eThis is why I love Visual Studio Code.\u003c/p\u003e\n\u003cp\u003eThat being said, we don't have native rich support for Java in Code. We \u003cem\u003edo\u003c/em\u003e have syntax and bracket matching for Java, I wanted to see if I could compile and possibly display any errors directly in code.\u003c/p\u003e\n\u003cp\u003eWe do that using \u003ca href=\"https://code.visualstudio.com/docs/editor/tasks\"\u003eTasks\u003c/a\u003e, and here's what I did:\u003c/p\u003e\n\u003ch3\u003eConfigure a Task Runner\u003c/h3\u003e\n\u003cp\u003eTo start you need a task runner for your project, which is where you will...you guessed it...configure tasks.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eHit \u003ccode\u003eCtrl + Shift + P\u003c/code\u003e to bring up the command palette. Search for \"task\" and you'll get the \u003cem\u003eConfigure Task Runner\u003c/em\u003e command. \u003c/li\u003e\n\u003cli\u003eSelect it and press \u003ccode\u003eEnter\u003c/code\u003e to generate a tasks.json file.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg src=\"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/configure-task-runner.png\" alt=\"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/configure-task-runner.png\"\u003e\u003c/p\u003e\n\u003cp\u003eThe default \u003cem\u003etasks.json\u003c/em\u003e file has some samples along with some reference variables at the top of the file.\u003c/p\u003e\n\u003cp\u003eNext up, we create our task.\u003c/p\u003e\n\u003ch3\u003eConfigure a Task\u003c/h3\u003e\n\u003cp\u003eTo see if we have any errors, we want to run our Java compiler on our code to get any error. In the example below, I'm using a simple project with a \u003ccode\u003esrc\u003c/code\u003e and a \u003ccode\u003etarget\u003c/code\u003e directory where the \u003ccode\u003esrc\u003c/code\u003e directory contains all of our Java files.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eFirst, clear out the other tasks in the file. We only want the one we're going to use which is our javac command.\u003c/li\u003e\n\u003cli\u003eAdd the task to run the Java compiler\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e{% codeblock lang:javascript %}\n{\n\"version\": \"0.1.0\",\n\"command\": \"javac\",\n\"showOutput\": \"always\",\n\"isShellCommand\": true,\n\"args\": [\"-d\",\"${workspaceRoot}\\build\\classes\",\"${workspaceRoot}\\src\\main\\java\\*.java\"]\n}\n{% endcodeblock %}\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003eNow, we can run our command by hitting \u003ccode\u003eCtrl + Shift + P\u003c/code\u003e and typing \u003cem\u003eRun Task\u003c/em\u003e should show us our new Java task.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg src=\"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/new-javac-task.png\" alt=\"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/new-javac-task.png\"\u003e\u003c/p\u003e\n\u003col start=\"4\"\u003e\n\u003cli\u003eSelect it to run it, and assuming you have an error, it should display something in the output window.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg src=\"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/javac-output.png\" alt=\"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/javac-output.png\"\u003e\u003c/p\u003e\n\u003cp\u003eWe're making progress, but it would be nice to see those errors inline in our code files, wouldn't it? That's where Problem Matchers come in.\u003c/p\u003e\n\u003ch3\u003eAdd a Problem Matcher to your Task\u003c/h3\u003e\n\u003cp\u003eNow that we have a task running, we need to tell Code how to process the output. We do that using configuring a problem matcher that uses a regular expression to parse the output.\u003c/p\u003e\n\u003cp\u003eHere's what my task looks like now:\u003c/p\u003e\n\u003cp\u003e{% codeblock lang:javascript %}\n{\n\"version\": \"0.1.0\",\n\"command\": \"javac\",\n\"showOutput\": \"silent\",\t// changed so that the output window doesn't pop up constantly\n\"isShellCommand\": true,\n\"args\": [\"-d\",\"${workspaceRoot}\\target\",\"${workspaceRoot}\\src\\*.java\"],\n\"problemMatcher\": {\n\"owner\": \"external\",\n\"fileLocation\": [\"absolute\"],\n\"pattern\": [\n{\n\"regexp\": \"^(.+\\.java):(\\d):(?:\\s+(error)):(?:\\s+(.*))$\",\n\"file\": 1,\n\"location\": 2,\n\"severity\": 3,\n\"message\": 4\n}\n]\n}\n}\n{% endcodeblock %}\u003c/p\u003e\n\u003cp\u003eIf you'd like the full scoop on how this works, you can check out the explanation on the Code documentation on \u003ca href=\"https://code.visualstudio.com/Docs/editor/tasks#_defining-a-problem-matcher\"\u003ewriting problem matchers\u003c/a\u003e but basically each of the variables listed beneath the \u003ccode\u003eregexp\u003c/code\u003e represent a part of the VS code message that should display.\u003c/p\u003e\n\u003cp\u003eNow that I've updated my task. If we run it again by hitting \u003ccode\u003eCtrl + P\u003c/code\u003e and typing \u003cem\u003etask javac\u003c/em\u003e we should get the following:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-inline.png\" alt=\"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-inline.png\"\u003e\u003c/p\u003e\n\u003cp\u003e...and if we bring up our warnings by hitting \u003ccode\u003eCtrl + Shift + M\u003c/code\u003e we should see:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-warning.png\" alt=\"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-warning.png\"\u003e\u003c/p\u003e\n\u003cp\u003eClick on the warning, should bring you to the file with the error in it.\u003c/p\u003e\n\u003ch2\u003eHey, Why Can't I Add More Tasks to tasks.json?\u003c/h2\u003e\n\u003cp\u003eGreat question! Although I don't have an official answer, here's my opinion: \u003cstrong\u003eIt's a bad idea\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003etasks.json\u003c/code\u003e file is an IDE specific configuration file. All it's really doing to making shortcuts through your IDE to execute different commands from the command line. So rather than setup multiple tasks for each individual command, you should do yourself and your project a favour and setup a build script and use that in your tasks.json file.\u003c/p\u003e\n\u003cp\u003eA build script will have all the commands and scripts you need to run, build, test, or do whatever to your project. Plus, it's usable \u003cem\u003eoutside\u003c/em\u003e of Code, so it's much more useful.\u003c/p\u003e\n\u003cp\u003eAlthough totally customizable (which I'll cover in \u003ca href=\"http://westerndevs.com/using-java-build-script-tasks-in-visual-studio-code/\"\u003ean upcoming post\u003c/a\u003e), you can see this action now if you're using \u003ca href=\"https://code.visualstudio.com/Docs/editor/tasks#_mapping-gulp-grunt-and-jake-output-to-problem-matchers\"\u003eGulp, Grunt, or Jake\u003c/a\u003e in your existing projects.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eThanks for playing. ~ DW\u003c/p\u003e\n\u003ch5\u003eReferences\u003c/h5\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://code.visualstudio.com/Docs/editor/tasks\"\u003eTasks in Visual Studio Code\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://code.visualstudio.com/docs/editor/tasks_appendix\"\u003etasks.json Schema reference\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://code.visualstudio.com/Docs/editor/tasks#_mapping-gulp-grunt-and-jake-output-to-problem-matchers\"\u003eMapping Gulp, Grunt and Jake Output to Problem Matchers\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n","layout":"post","title":"Custom Tasks for Java in Visual Studio Code","date":"Wed Oct 14 2015 03:25:50 GMT-0500 (Central Daylight Time)","categories":null,"comments":true,"authorId":"david_wesst","originalurl":"http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/"}},"__N_SSG":true},"page":"/blog/[id]","query":{"id":"custom-tasks-for-java-in-visual-studio-code"},"buildId":"-9wn_hi6_-Q32OgH9YOcv","assetPrefix":"https://www.davidwesst.com","runtimeConfig":{},"nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="https://www.davidwesst.com/_next/static/runtime/polyfills-10c88b4b028d13fe33de.js"></script><script async="" data-next-page="/_app" src="https://www.davidwesst.com/_next/static/-9wn_hi6_-Q32OgH9YOcv/pages/_app.js"></script><script async="" data-next-page="/blog/[id]" src="https://www.davidwesst.com/_next/static/-9wn_hi6_-Q32OgH9YOcv/pages/blog/%5Bid%5D.js"></script><script src="https://www.davidwesst.com/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="https://www.davidwesst.com/_next/static/chunks/framework.e84fa698c7ee940652bd.js" async=""></script><script src="https://www.davidwesst.com/_next/static/chunks/commons.7c101d7f1672b68d7c1c.js" async=""></script><script src="https://www.davidwesst.com/_next/static/runtime/main-98aa3916935decc0cde3.js" async=""></script><script src="https://www.davidwesst.com/_next/static/-9wn_hi6_-Q32OgH9YOcv/_buildManifest.js" async=""></script><script src="https://www.davidwesst.com/_next/static/-9wn_hi6_-Q32OgH9YOcv/_ssgManifest.js" async=""></script></body></html>