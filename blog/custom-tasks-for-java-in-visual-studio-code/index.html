<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.45 'Quattrocento Sans',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Quattrocento Sans',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:0.85rem;line-height:1.45rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0.90625rem;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1.1487rem;line-height:1.45rem;border-left:0.54375rem solid #1ca086;color:hsla(0,0%,0%,0.65);font-style:italic;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.45rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.45rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#1ca086;text-decoration:none;text-shadow:.03em 0 #fff,-.03em 0 #fff,0 .03em #fff,0 -.03em #fff,.06em 0 #fff,-.06em 0 #fff,.09em 0 #fff,-.09em 0 #fff,.12em 0 #fff,-.12em 0 #fff,.15em 0 #fff,-.15em 0 #fff;background-image:linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 1px, #1ca086 1px, #1ca086 2px, rgba(0, 0, 0, 0) 2px);}a:hover,a:active{text-shadow:none;background-image:none;}h1,h2,h3,h4,h5,h6{margin-top:2.175rem;margin-bottom:0.725rem;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.45rem;color:hsla(0,0%,0%,0.8);font-style:normal;font-weight:400;}blockquote cite:before{content:"â€” ";}@media only screen and (max-width:480px){html{font-size:106.25%;line-height:24.65px;}blockquote{border-left:0.27187rem solid #1ca086;color:hsla(0,0%,0%,0.59);padding-left:0.81563rem;font-style:italic;margin-left:-1.0875rem;margin-right:0;}}</style><style data-href="/styles.ec9e02261eab656e2f2e.css" id="gatsby-global-css">html{background-color:#fff}.layout-module--navList--KVtJr{display:flex;flex-flow:row}.layout-module--navList--KVtJr a{margin:0 .25rem}.layout-module--navList--KVtJr a:first-child{margin-left:0}.layout-module--navList--KVtJr a:last-child{margin-right:0}</style><meta name="generator" content="Gatsby 2.28.0"/><link href="//fonts.googleapis.com/css?family=Work+Sans:600|Quattrocento+Sans:400,400i,700" rel="stylesheet" type="text/css"/><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-817d0ea9e926abcaef23.js"/><link as="script" rel="preload" href="/framework-d066f55745d479a55fde.js"/><link as="script" rel="preload" href="/app-59205a2ed35686355f9f.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-626f9bcb1055b5743f2b.js"/><link as="fetch" rel="preload" href="/page-data/blog/custom-tasks-for-java-in-visual-studio-code/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3159585216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin:3rem auto;max-width:800px;padding:0 1rem"><header><h1>davidwesst.com</h1><nav class="layout-module--navList--KVtJr"><a href="/">Home</a><a href="/blog">Blog</a></nav></header><h1>Custom Tasks for Java in Visual Studio Code</h1><article><p>Now that I'm a Java Developer, I no longer worry about the bloating feeling I get when I need to open up the original Visual Studio. Now I worry about opening another instance of Eclipse. Don't get me wrong, Visual Studio and Eclipse are both great tools, but there are plenty of times where I don't need to bring a forklift just to move a single box.</p>
<!--more-->
<p>This is why I love Visual Studio Code.</p>
<p>That being said, we don't have native rich support for Java in Code. We <em>do</em> have syntax and bracket matching for Java, I wanted to see if I could compile and possibly display any errors directly in code.</p>
<p>We do that using <a href="https://code.visualstudio.com/docs/editor/tasks">Tasks</a>, and here's what I did:</p>
<h3>Configure a Task Runner</h3>
<p>To start you need a task runner for your project, which is where you will...you guessed it...configure tasks.</p>
<ol>
<li>Hit <code>Ctrl + Shift + P</code> to bring up the command palette. Search for "task" and you'll get the <em>Configure Task Runner</em> command. </li>
<li>Select it and press <code>Enter</code> to generate a tasks.json file.</li>
</ol>
<p><img src="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/configure-task-runner.png" alt="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/configure-task-runner.png"></p>
<p>The default <em>tasks.json</em> file has some samples along with some reference variables at the top of the file.</p>
<p>Next up, we create our task.</p>
<h3>Configure a Task</h3>
<p>To see if we have any errors, we want to run our Java compiler on our code to get any error. In the example below, I'm using a simple project with a <code>src</code> and a <code>target</code> directory where the <code>src</code> directory contains all of our Java files.</p>
<ol>
<li>First, clear out the other tasks in the file. We only want the one we're going to use which is our javac command.</li>
<li>Add the task to run the Java compiler</li>
</ol>
<p>{% codeblock lang:javascript %}
{
"version": "0.1.0",
"command": "javac",
"showOutput": "always",
"isShellCommand": true,
"args": ["-d","${workspaceRoot}\build\classes","${workspaceRoot}\src\main\java\*.java"]
}
{% endcodeblock %}</p>
<ol start="3">
<li>Now, we can run our command by hitting <code>Ctrl + Shift + P</code> and typing <em>Run Task</em> should show us our new Java task.</li>
</ol>
<p><img src="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/new-javac-task.png" alt="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/new-javac-task.png"></p>
<ol start="4">
<li>Select it to run it, and assuming you have an error, it should display something in the output window.</li>
</ol>
<p><img src="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/javac-output.png" alt="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/javac-output.png"></p>
<p>We're making progress, but it would be nice to see those errors inline in our code files, wouldn't it? That's where Problem Matchers come in.</p>
<h3>Add a Problem Matcher to your Task</h3>
<p>Now that we have a task running, we need to tell Code how to process the output. We do that using configuring a problem matcher that uses a regular expression to parse the output.</p>
<p>Here's what my task looks like now:</p>
<p>{% codeblock lang:javascript %}
{
"version": "0.1.0",
"command": "javac",
"showOutput": "silent",	// changed so that the output window doesn't pop up constantly
"isShellCommand": true,
"args": ["-d","${workspaceRoot}\target","${workspaceRoot}\src\*.java"],
"problemMatcher": {
"owner": "external",
"fileLocation": ["absolute"],
"pattern": [
{
"regexp": "^(.+\.java):(\d):(?:\s+(error)):(?:\s+(.*))$",
"file": 1,
"location": 2,
"severity": 3,
"message": 4
}
]
}
}
{% endcodeblock %}</p>
<p>If you'd like the full scoop on how this works, you can check out the explanation on the Code documentation on <a href="https://code.visualstudio.com/Docs/editor/tasks#_defining-a-problem-matcher">writing problem matchers</a> but basically each of the variables listed beneath the <code>regexp</code> represent a part of the VS code message that should display.</p>
<p>Now that I've updated my task. If we run it again by hitting <code>Ctrl + P</code> and typing <em>task javac</em> we should get the following:</p>
<p><img src="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-inline.png" alt="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-inline.png"></p>
<p>...and if we bring up our warnings by hitting <code>Ctrl + Shift + M</code> we should see:</p>
<p><img src="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-warning.png" alt="http://blog.davidwesst.com/2015/10/Custom-Tasks-for-Java-in-Visual-Studio-Code/error-warning.png"></p>
<p>Click on the warning, should bring you to the file with the error in it.</p>
<h2>Hey, Why Can't I Add More Tasks to tasks.json?</h2>
<p>Great question! Although I don't have an official answer, here's my opinion: <strong>It's a bad idea</strong>.</p>
<p>The <code>tasks.json</code> file is an IDE specific configuration file. All it's really doing to making shortcuts through your IDE to execute different commands from the command line. So rather than setup multiple tasks for each individual command, you should do yourself and your project a favour and setup a build script and use that in your tasks.json file.</p>
<p>A build script will have all the commands and scripts you need to run, build, test, or do whatever to your project. Plus, it's usable <em>outside</em> of Code, so it's much more useful.</p>
<p>Although totally customizable (which I'll cover in <a href="http://westerndevs.com/using-java-build-script-tasks-in-visual-studio-code/">an upcoming post</a>), you can see this action now if you're using <a href="https://code.visualstudio.com/Docs/editor/tasks#_mapping-gulp-grunt-and-jake-output-to-problem-matchers">Gulp, Grunt, or Jake</a> in your existing projects.</p>
<hr>
<p>Thanks for playing. ~ DW</p>
<h5>References</h5>
<ol>
<li><a href="https://code.visualstudio.com/Docs/editor/tasks">Tasks in Visual Studio Code</a></li>
<li><a href="https://code.visualstudio.com/docs/editor/tasks_appendix">tasks.json Schema reference</a></li>
<li><a href="https://code.visualstudio.com/Docs/editor/tasks#_mapping-gulp-grunt-and-jake-output-to-problem-matchers">Mapping Gulp, Grunt and Jake Output to Problem Matchers</a></li>
</ol></article></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/custom-tasks-for-java-in-visual-studio-code/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-092c4c6a41bb38cca3d9.js"],"app":["/app-59205a2ed35686355f9f.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-57231cda656759f28836.js"],"component---src-pages-index-js":["/component---src-pages-index-js-272380f257cb8f59a445.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-626f9bcb1055b5743f2b.js"]};/*]]>*/</script><script src="/polyfill-092c4c6a41bb38cca3d9.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-626f9bcb1055b5743f2b.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-59205a2ed35686355f9f.js" async=""></script><script src="/framework-d066f55745d479a55fde.js" async=""></script><script src="/webpack-runtime-817d0ea9e926abcaef23.js" async=""></script></body></html>