<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.fd7047ceacd00dd722fa.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#e3eaf2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#3c526d}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#111b27}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em .3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8da1b9}.token.punctuation{color:#e3eaf2}.token.delimiter.important,.token.selector .parent,.token.tag,.token.tag .token.punctuation{color:#6cc}.token.attr-name,.token.boolean,.token.boolean.important,.token.constant,.token.number,.token.selector .token.attribute{color:#e6d37a}.token.class-name,.token.key,.token.parameter,.token.property,.token.property-access,.token.variable{color:#6cb8e6}.token.attr-value,.token.color,.token.inserted,.token.selector .token.value,.token.string,.token.string .token.url-link{color:#91d076}.token.builtin,.token.keyword-array,.token.package,.token.regex{color:#f4adf4}.token.function,.token.selector .token.class,.token.selector .token.id{color:#c699e3}.token.atrule .token.rule,.token.combinator,.token.keyword,.token.operator,.token.pseudo-class,.token.pseudo-element,.token.selector,.token.unit{color:#e9ae7e}.token.deleted,.token.important{color:#cd6660}.token.keyword-this,.token.this{color:#6cb8e6}.token.bold,.token.important,.token.keyword-this,.token.this{font-weight:700}.token.delimiter.important{font-weight:inherit}.token.italic{font-style:italic}.token.entity{cursor:help}.language-markdown .token.title,.language-markdown .token.title .token.punctuation{color:#6cb8e6;font-weight:700}.language-markdown .token.blockquote.punctuation{color:#f4adf4}.language-markdown .token.code{color:#6cc}.language-markdown .token.hr.punctuation{color:#6cb8e6}.language-markdown .token.url .token.content{color:#91d076}.language-markdown .token.url-link{color:#e6d37a}.language-markdown .token.list.punctuation{color:#f4adf4}.language-json .token.operator,.language-markdown .token.table-header{color:#e3eaf2}.language-scss .token.variable{color:#6cc}.token.cr:before,.token.lf:before,.token.space:before,.token.tab:not(:empty):before{color:#8da1b9}div.code-toolbar>.toolbar a,div.code-toolbar>.toolbar button{background:#6cb8e6;color:#111b27}div.code-toolbar>.toolbar a:focus,div.code-toolbar>.toolbar a:hover,div.code-toolbar>.toolbar button:focus,div.code-toolbar>.toolbar button:hover{background:rgba(108,184,230,.8549019607843137);color:#111b27;text-decoration:none}div.code-toolbar>.toolbar span,div.code-toolbar>.toolbar span:focus,div.code-toolbar>.toolbar span:hover{background:#8da1b9;color:#111b27}.line-highlight{background:rgba(60,82,109,.37254901960784315);background:linear-gradient(90deg,rgba(60,82,109,.37254901960784315) 70%,rgba(60,82,109,.3333333333333333))}.line-highlight:before,.line-highlight[data-end]:after{background-color:#8da1b9;box-shadow:0 1px #3c526d;color:#111b27}pre[id].linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:rgba(141,161,185,.09411764705882353)}.line-numbers .line-numbers-rows{background:rgba(11,18,27,.47843137254901963);border-right:1px solid #0b121b}.line-numbers-rows>span:before{color:rgba(141,161,185,.8549019607843137)}.rainbow-braces .token.punctuation.brace-level-1,.rainbow-braces .token.punctuation.brace-level-5,.rainbow-braces .token.punctuation.brace-level-9{color:#e6d37a}.rainbow-braces .token.punctuation.brace-level-2,.rainbow-braces .token.punctuation.brace-level-6,.rainbow-braces .token.punctuation.brace-level-10{color:#f4adf4}.rainbow-braces .token.punctuation.brace-level-3,.rainbow-braces .token.punctuation.brace-level-7,.rainbow-braces .token.punctuation.brace-level-11{color:#6cb8e6}.rainbow-braces .token.punctuation.brace-level-4,.rainbow-braces .token.punctuation.brace-level-8,.rainbow-braces .token.punctuation.brace-level-12{color:#c699e3}pre.diff-highlight>code .token.deleted:not(.prefix),pre>code.diff-highlight .token.deleted:not(.prefix){background-color:rgba(205,102,96,.12156862745098039)}pre.diff-highlight>code .token.inserted:not(.prefix),pre>code.diff-highlight .token.inserted:not(.prefix){background-color:rgba(145,208,118,.12156862745098039)}.command-line-prompt{border-right:1px solid #0b121b}.command-line-prompt>span:before{color:rgba(141,161,185,.8549019607843137)}</style><meta name="generator" content="Gatsby 3.5.0"/><style data-styled="" data-styled-version="5.3.0">.fyCFfC{margin-left:auto;margin-right:auto;max-width:1300px;padding-left:var(--size-700);padding-right:var(--size-700);height:100%;}/*!sc*/
@media screen and (max-width:1000px){.fyCFfC{padding-left:var(--size-400);padding-right:var(--size-400);}}/*!sc*/
data-styled.g1[id="container__Container-wzm7r6-0"]{content:"fyCFfC,"}/*!sc*/
.djBWqq{padding-top:var(--size-300);}/*!sc*/
data-styled.g2[id="header__StyledHeader-sc-16yug5d-0"]{content:"djBWqq,"}/*!sc*/
.bFWBJf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g3[id="header__HeaderWrapper-sc-16yug5d-1"]{content:"bFWBJf,"}/*!sc*/
.jgTfYP a{text-transform:uppercase;-webkit-text-decoration:none;text-decoration:none;font-size:var(--size-400);color:inherit;}/*!sc*/
data-styled.g4[id="header__HeaderTitle-sc-16yug5d-2"]{content:"jgTfYP,"}/*!sc*/
.cFOtaf{position:static;padding:0;background:transparent;-webkit-backdrop-filter:unset;backdrop-filter:unset;}/*!sc*/
data-styled.g5[id="header__StyledNav-sc-16yug5d-3"]{content:"cFOtaf,"}/*!sc*/
.fESDyG{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;padding:0;list-style-type:none;}/*!sc*/
data-styled.g6[id="header__StyledNavList-sc-16yug5d-4"]{content:"fESDyG,"}/*!sc*/
.yQmWe:not(:last-of-type){margin-right:2rem;}/*!sc*/
@media screen and (max-width:700px){.yQmWe:not(:last-of-type){margin-right:1rem;}}/*!sc*/
.yQmWe a{color:inherit;text-transform:uppercase;font-size:var(--size-300);-webkit-text-decoration:none;text-decoration:none;-webkit-letter-spacing:0.1rem;-moz-letter-spacing:0.1rem;-ms-letter-spacing:0.1rem;letter-spacing:0.1rem;}/*!sc*/
@media screen and (max-width:700px){.yQmWe a{font-size:0.7rem;}}/*!sc*/
data-styled.g7[id="header__StyledNavListItem-sc-16yug5d-5"]{content:"yQmWe,"}/*!sc*/
.hKCIge{padding:0;list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
data-styled.g8[id="social-links__SocialLinkList-cvpnp8-0"]{content:"hKCIge,"}/*!sc*/
.fpxMfM{margin-right:var(--size-400);text-transform:uppercase;}/*!sc*/
.fpxMfM a{color:inherit;font-size:var(--size-300);}/*!sc*/
data-styled.g9[id="social-links__SocialLinkItem-cvpnp8-1"]{content:"fpxMfM,"}/*!sc*/
.BpUiU{padding-top:var(--size-300);padding-bottom:var(--size-300);}/*!sc*/
data-styled.g10[id="footer__StyledFooter-sc-1bx3hj9-0"]{content:"BpUiU,"}/*!sc*/
.ctWQHz{font-size:var(--size-300);}/*!sc*/
.ctWQHz a{color:inherit;}/*!sc*/
data-styled.g11[id="footer__FooterAttribution-sc-1bx3hj9-1"]{content:"ctWQHz,"}/*!sc*/
.eQspMK{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
data-styled.g12[id="footer__FooterWrapper-sc-1bx3hj9-2"]{content:"eQspMK,"}/*!sc*/
*,*::before,*::after{box-sizing:border-box;}/*!sc*/
body,h1,h2,h3,h4,p,figure,blockquote,dl,dd{margin:0;}/*!sc*/
ul[role='list'],ol[role='list']{list-style:none;}/*!sc*/
html:focus-within{-webkit-scroll-behavior:smooth;-moz-scroll-behavior:smooth;-ms-scroll-behavior:smooth;scroll-behavior:smooth;}/*!sc*/
html{height:-webkit-fill-available;}/*!sc*/
body{min-height:100vh;min-height:-webkit-fill-available;text-rendering:optimizeSpeed;line-height:1.5;}/*!sc*/
a:not([class]){-webkit-text-decoration-skip-ink:auto;text-decoration-skip-ink:auto;}/*!sc*/
img,picture{max-width:100%;display:block;}/*!sc*/
input,button,textarea,select{font:inherit;}/*!sc*/
@media (prefers-reduced-motion:reduce){html:focus-within{-webkit-scroll-behavior:auto;-moz-scroll-behavior:auto;-ms-scroll-behavior:auto;scroll-behavior:auto;}*,*::before,*::after{-webkit-animation-duration:0.01ms !important;animation-duration:0.01ms !important;-webkit-animation-iteration-count:1 !important;animation-iteration-count:1 !important;-webkit-transition-duration:0.01ms !important;transition-duration:0.01ms !important;-webkit-scroll-behavior:auto !important;-moz-scroll-behavior:auto !important;-ms-scroll-behavior:auto !important;scroll-behavior:auto !important;}}/*!sc*/
html{width:100vw;overflow-x:hidden;}/*!sc*/
body::-webkit-scrollbar{width:10px;}/*!sc*/
body::-webkit-scrollbar-thumb{background-color:rgba(55,41,44,.4);}/*!sc*/
body::-webkit-scrollbar-track{background:transparent;}/*!sc*/
:root{-webkit-scroll-behavior:smooth;-moz-scroll-behavior:smooth;-ms-scroll-behavior:smooth;scroll-behavior:smooth;--size-300:0.75rem;--size-400:1rem;--size-500:1.33rem;--size-600:1.77rem;--size-700:2.36rem;--size-800:3.15rem;--size-900:4.2rem;}/*!sc*/
body{font-family:'Poppins',-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue, helvetica,Ubuntu,roboto,noto,segoe ui,arial,sans-serif;color:#37292C;background-attachment:fixed;background-color:#d9e4f5;background-image:linear-gradient(315deg,#d9e4f5 0%,#f5e3e6 74%);}/*!sc*/
h1,h2,h3,h4{line-height:1.125;}/*!sc*/
h1,h2,h3{font-weight:700;}/*!sc*/
h1{font-size:var(--size-800);}/*!sc*/
h2{font-size:var(--size-700);}/*!sc*/
h3{font-size:var(--size-600);}/*!sc*/
p{font-size:var(--size-400);}/*!sc*/
::selection{background:rgba(255,255,255,0.9);}/*!sc*/
p,li{max-width:none;}/*!sc*/
.gatsby-resp-image-wrapper{margin-left:0 !important;}/*!sc*/
data-styled.g13[id="sc-global-iNdVJG1"]{content:"sc-global-iNdVJG1,"}/*!sc*/
.kPzKUg{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
.kPzKUg main{margin-top:auto;margin-bottom:auto;}/*!sc*/
.kPzKUg footer{margin-top:auto;}/*!sc*/
data-styled.g14[id="layout__LayoutWrapper-bk28al-0"]{content:"kPzKUg,"}/*!sc*/
.EKsrG{margin-top:0.3rem;margin-bottom:0.3rem;text-transform:uppercase;font-size:var(--size-300);}/*!sc*/
.EKsrG a{position:relative;z-index:2;background-color:rgba(68,100,173,0.4);-webkit-text-decoration:none;text-decoration:none;padding:0.2rem 0.2rem;color:inherit;border:1px solid rgba(255,255,255,1);border-radius:4px;}/*!sc*/
.EKsrG a:hover{background-color:rgba(255,255,255,0.9);}/*!sc*/
data-styled.g16[id="tags__Tag-by516m-0"]{content:"EKsrG,"}/*!sc*/
.bCmFPX{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:2rem;margin-bottom;2rem;}/*!sc*/
data-styled.g17[id="tags__StyledTags-by516m-1"]{content:"bCmFPX,"}/*!sc*/
.dCnHnW{padding-top:var(--size-900);padding-bottom:var(--size-900);margin-left:auto;margin-right:auto;max-width:70ch;word-wrap:break-word;}/*!sc*/
data-styled.g47[id="post-template__PostWrapper-sc-1tulhbb-0"]{content:"dCnHnW,"}/*!sc*/
.hYSUOw{font-size:var(--size-700);}/*!sc*/
data-styled.g48[id="post-template__PostTitle-sc-1tulhbb-1"]{content:"hYSUOw,"}/*!sc*/
.gtuMwP{font-size:var(--size-400);padding-top:1rem;text-transform:uppercase;}/*!sc*/
data-styled.g49[id="post-template__PostDate-sc-1tulhbb-2"]{content:"gtuMwP,"}/*!sc*/
.fWSDaT{padding-top:var(--size-800);}/*!sc*/
.fWSDaT > * + *{margin-top:var(--size-300);}/*!sc*/
.fWSDaT > p + p{margin-top:var(--size-700);}/*!sc*/
.fWSDaT * + h1,.fWSDaT * + h2,.fWSDaT * + h3{margin-top:var(--size-900);}/*!sc*/
.fWSDaT h1{font-size:var(--size-700);}/*!sc*/
.fWSDaT h2{font-size:var(--size-600);}/*!sc*/
.fWSDaT h3{font-size:var(--size-500);}/*!sc*/
.fWSDaT b,.fWSDaT strong{font-weight:600;}/*!sc*/
.fWSDaT a{color:inherit;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration-thickness:0.125rem;text-decoration-thickness:0.125rem;}/*!sc*/
.fWSDaT blockquote{padding-left:var(--size-400);border-left:5px solid;font-style:italic;}/*!sc*/
.fWSDaT code{font-family:'Source Sans Pro',monospace;overflow-x:auto;white-space:pre-wrap;}/*!sc*/
.fWSDaT pre{overflow-x:auto;white-space:pre-wrap;max-width:100%;}/*!sc*/
data-styled.g50[id="post-template__PostContent-sc-1tulhbb-3"]{content:"fWSDaT,"}/*!sc*/
.haPePl{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:var(--size-900);}/*!sc*/
.haPePl > *{position:relative;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:1rem;padding-top:0.5rem;padding-bottom:0.5rem;border-radius:8px;border:1px solid rgba(255,255,255,0.5);background-color:rgba(255,255,255,0.3);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);margin:0.5rem;}/*!sc*/
.haPePl > *:hover{background-color:rgba(255,255,255,0.5);}/*!sc*/
.haPePl span{text-transform:uppercase;opacity:0.6;font-size:var(--size-400);padding-bottom:var(--size-500);}/*!sc*/
.haPePl a{color:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:var(--size-400);text-transform:capitalize;}/*!sc*/
.haPePl a::after{content:'';position:absolute;left:0;right:0;top:0;bottom:0;}/*!sc*/
data-styled.g51[id="post-template__PostPagination-sc-1tulhbb-4"]{content:"haPePl,"}/*!sc*/
</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro|Poppins:400,400i,700&amp;display=swap" rel="stylesheet"/><link rel="icon" href="/favicon-32x32.png?v=159e0719d0cdbde15ad0cca727d0588f" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=159e0719d0cdbde15ad0cca727d0588f"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=159e0719d0cdbde15ad0cca727d0588f"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=159e0719d0cdbde15ad0cca727d0588f"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=159e0719d0cdbde15ad0cca727d0588f"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=159e0719d0cdbde15ad0cca727d0588f"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=159e0719d0cdbde15ad0cca727d0588f"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=159e0719d0cdbde15ad0cca727d0588f"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=159e0719d0cdbde15ad0cca727d0588f"/><title data-react-helmet="true">How to Compile Typescript into a Single File with AMD Modules with Gulp - David Wesst</title><meta data-react-helmet="true" name="description" content="I’ve been tinkering with TypeScript lately and was trying to setup my project to compile all of my modules into a single file, which would then be used in an…"/><meta data-react-helmet="true" property="og:title" content="How to Compile Typescript into a Single File with AMD Modules with Gulp"/><meta data-react-helmet="true" property="og:description" content="I’ve been tinkering with TypeScript lately and was trying to setup my project to compile all of my modules into a single file, which would then be used in an…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="davidwesst"/><meta data-react-helmet="true" name="twitter:title" content="How to Compile Typescript into a Single File with AMD Modules with Gulp"/><meta data-react-helmet="true" name="twitter:description" content="I’ve been tinkering with TypeScript lately and was trying to setup my project to compile all of my modules into a single file, which would then be used in an…"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-48fc1ec7caf4d5edff8b.js"/><link as="script" rel="preload" href="/framework-2756bcb97a39e65632cd.js"/><link as="script" rel="preload" href="/app-11ae077ca52a2b1adfa7.js"/><link as="script" rel="preload" href="/commons-af92040c4234d1cc890a.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-19da77acd336faab215b.js"/><link as="fetch" rel="preload" href="/page-data/blog/typescript-with-amd-and-gulp/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2555585279.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2841359383.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3159585216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout__LayoutWrapper-bk28al-0 kPzKUg"><header class="header__StyledHeader-sc-16yug5d-0 djBWqq"><div class="container__Container-wzm7r6-0 header__HeaderWrapper-sc-16yug5d-1 fyCFfC bFWBJf"><div class="header__HeaderTitle-sc-16yug5d-2 jgTfYP"><a href="/">David Wesst</a></div><nav class="header__StyledNav-sc-16yug5d-3 cFOtaf"><ul class="header__StyledNavList-sc-16yug5d-4 fESDyG"><li class="header__StyledNavListItem-sc-16yug5d-5 yQmWe"><a href="/blog">Blog</a></li><li class="header__StyledNavListItem-sc-16yug5d-5 yQmWe"><a href="/about">About</a></li></ul></nav></div></header><main><div class="container__Container-wzm7r6-0 fyCFfC"><div class="post-template__PostWrapper-sc-1tulhbb-0 dCnHnW"><article><h1 class="post-template__PostTitle-sc-1tulhbb-1 hYSUOw">How to Compile Typescript into a Single File with AMD Modules with Gulp</h1><span class="post-template__PostDate-sc-1tulhbb-2 gtuMwP">September 12, 2016</span><section class="post-template__PostContent-sc-1tulhbb-3 fWSDaT"><p>I’ve been tinkering with TypeScript lately and was trying to setup my project to compile all of my modules into a single file, which would then be used in an HTML page. Maybe this is obvious to the more experienced TypeScript developer, but I had made a number of false assumptions while trying to get this to work.</p>
<p>This post will walk you through what I did to setup my build and get it working in an HTML page.</p>
<p><strong>You can follow along at home with the source code which I’ve put up on <a href="https://github.com/davidwesst/ts-project-template">GitHub</a></strong></p>
<h2>Modular TypeScript</h2>
<p>My project is starting out simple, with a single module and a couple of different “Apps” that will use the module. Module in TypeScript is extensively documented in the <a href="">TypeScript Handbook</a>, so if you’re not familiar with this I would suggest reading up on it as it’s pretty awesome once you start using it.</p>
<p>In any case, here’s my code:</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token comment">// ModuleOne.ts</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ModuleOne</span> <span class="token punctuation">{</span>
    <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Hello from Module1!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">sayHelloTo</span><span class="token punctuation">(</span>who<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Hello "</span> <span class="token operator">+</span> who<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">". This is Module1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token comment">// ModuleTwo.ts</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ModuleOne</span> <span class="token punctuation">{</span>
    <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Hello from ModuleTwo!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">sayHelloTo</span><span class="token punctuation">(</span>who<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Hello "</span> <span class="token operator">+</span> who<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">". This is ModuleTwo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token comment">// App.ts</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Module1 <span class="token keyword">from</span> <span class="token string">"./modules/Module1"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Module2 <span class="token keyword">from</span> <span class="token string">"./modules/Module2"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> m1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Module1</span><span class="token punctuation">.</span><span class="token function">ModuleOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> m2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Module2</span><span class="token punctuation">.</span><span class="token function">ModuleTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        m1<span class="token punctuation">.</span><span class="token function">sayHelloTo</span><span class="token punctuation">(</span><span class="token string">"David Wesst"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m2<span class="token punctuation">.</span><span class="token function">sayHelloTo</span><span class="token punctuation">(</span><span class="token string">"David Wesst"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>I have a single application that is using two modules. Plain and simple. Next up, I compile my code into a single file, then reference that in my HTML, and done like dinner.</p>
<p>…or so I thought.</p>
<h2>The <code class="language-text">--outFile</code> Parameter</h2>
<p> Reading through the doucmentation about TypeScript compilation, I found the <code class="language-text">--outFile</code> or <code class="language-text">--out</code> parameter in the <a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html">documentation</a>. I immediately assumed that I was done, as I would simple choose my ES target, select the type of modules I would like, and presto. </p>
<p> That wasn’t the case.</p>
<p> Being a person who likes modern JavaScript, I had originally opted to output ES6 compatible code complete with the new modules. </p>
<p> This is was my first mistake. </p>
<p> I found was that when I compiled, I would get a single output file but it would be completely blank. No error, but just an empty file. This is expected behaviour, as the <code class="language-text">--outFile</code> option only supports <em>commonjs</em> and <em>amd</em>. That meant no ES6 or even ES2015 modules for my project, which is probably for the best considering how few web browsers in the wild actually support ES6 modules as of this writing.</p>
<p> In the end, I decided to go with AMD modules as I had some experience with <a href="http://requirejs.org/">RequireJS</a>.</p>
<p> Now, when I try to compile again it works as expected! One big JavaScript file ready to go.</p>
<p> …sort of.</p>
<h2>Using My Compiled TypeScript</h2>
<p>Somewhere along the line, I assumed that whatever JavaScript file I compiled would only need me to add a <code class="language-text">&lt;script&gt;</code> tag reference to point to it like any other JavaScript file. </p>
<p>This was my second mistake, albeit a pretty silly one.</p>
<p>AMD modules have always needed RequireJS to load properly. That’s the purpose for RequireJS. Maybe I had assumed the TypeScript compiler would embed this library or something, but whatever my reasoning it was wrong. I needed to include a <code class="language-text">data-main</code> file, as you do with every RequireJS example.</p>
<p>I added this to my HTML file, along with the RequireJS library in my project:</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">data-main</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lib/require.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></div>
<p>Then, my <code class="language-text">data-main</code> file goes something like this:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// main.js</span>
  
requirejs<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baseUrl<span class="token operator">:</span> <span class="token string">'lib'</span><span class="token punctuation">,</span>
    paths<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'App'</span><span class="token operator">:</span><span class="token string">'../app'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'App'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">MyApp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'starting application...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyApp<span class="token punctuation">.</span>App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>I’m not going to go into the details here, but my <code class="language-text">paths</code> object in the <code class="language-text">requirejs.config</code> is pointing <code class="language-text">App</code> to our outputted file. We use this in our main function and point our compiled modules to the <code class="language-text">MyApp</code> object. We then call the <code class="language-text">start()</code> function on our exported class and we are off to the races. </p>
<p>When we run the application, we see the following in the JavaScript console.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 565px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/66d1c9c12ec4dd5ea1960f02f433b1c2/07eba/38ngK52.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 62.65822784810127%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAByUlEQVQ4y52S224SURSG5y08tCCth6SJlsqE4w1qSEr7Yuqb2Ecw4cYre2FSe1GKgKBQmBlm79kM58PAZ7INnlJ1dCVf9tp75V9Z6882zFSWvUcHPIwniJtJEskMB2YKM53TPE5m2IrucHP7DrciMW5sRbkdiel8O3ZXs/tgj+jufSI79zDMhEn+6TMOi0ek0mmev3jJ6dtTSqUSJyevyGWzHB8fYSYSZDMZCoUCyVxav8f390mnUzzJ53W9WDzEOHvzjmr1gnqlwuuqy5k9xlLQ68+YTye4QtDv9/UppYcQgstKhUajyUW5TLl8yfvzcxrNJj3XxaiJOU2NR1VYdHxBRwnasstkNua6WK/XmtVqpVkug281oyt9mpZHw5K0bJfJeEgQLFmtg59EP7JpuAG+50bLllzZgrYtUX0f3/dZLJZaGATBtQ3+hGEJheUq2j1FTypmsynD4YDBwNd+LRbzzaKECaPedqi1bD58tvnUcRCewhEejiu5smzUYMR4Omc0mTGa/h2j3pV87HrUOpKW4+kGQg0Q/QGOUPruj6f4o3AYYdb4Jw+/CsI6FMLD332N8PwyofJ8pPw/PM/HdRWtrkXLtrEtwRczQpgZeArL9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="What the console window should look like"
        title="What the console window should look like"
        src="/static/66d1c9c12ec4dd5ea1960f02f433b1c2/07eba/38ngK52.png"
        srcset="/static/66d1c9c12ec4dd5ea1960f02f433b1c2/c26ae/38ngK52.png 158w,
/static/66d1c9c12ec4dd5ea1960f02f433b1c2/6bdcf/38ngK52.png 315w,
/static/66d1c9c12ec4dd5ea1960f02f433b1c2/07eba/38ngK52.png 565w"
        sizes="(max-width: 565px) 100vw, 565px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h2>Details on Compilation</h2>
<p>I skipped that part on purpose, because I don’t use the TSC compiler directly. Rather, I use <a href="https://github.com/ivogabe/gulp-typescript"><code class="language-text">gulp-typescript</code></a> with a <code class="language-text">tsconfig</code> file to compile my TypeScript and create sourcemaps for them. All of this is detailed on the <a href="https://www.npmjs.com/package/gulp-typescript">package page</a>, but I’ll include my gulp task to make sure you have all the details in one place. </p>
<p>You’re welcome. ;)</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> tsProject <span class="token operator">=</span> ts<span class="token punctuation">.</span><span class="token function">createProject</span><span class="token punctuation">(</span><span class="token string">'tsconfig.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'build-ts'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tsResult <span class="token operator">=</span> tsProject<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>sourcemaps<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// using gulp-sourcemaps as prescribed by gulp-typescript</span>
                    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">ts</span><span class="token punctuation">(</span>tsProject<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> tsResult
            <span class="token punctuation">.</span>js
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>sourcemaps<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>connect<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// I use gulp-connect to watch and reload the page as I develop</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Oh, and here’s my <code class="language-text">tsconfig.json</code> file too.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
    <span class="token string">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">"module"</span><span class="token operator">:</span> <span class="token string">"amd"</span><span class="token punctuation">,</span>
        <span class="token string">"rootDir"</span><span class="token operator">:</span> <span class="token string">"./src/ts"</span><span class="token punctuation">,</span>
        <span class="token string">"sourceRoot"</span><span class="token operator">:</span> <span class="token string">"./src/ts"</span><span class="token punctuation">,</span>
        <span class="token string">"outFile"</span><span class="token operator">:</span> <span class="token string">"app.js"</span><span class="token punctuation">,</span>
        <span class="token string">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"node_modules"</span><span class="token punctuation">,</span>
        <span class="token string">"dist"</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div></section></article><nav class="post-template__PostPagination-sc-1tulhbb-4 haPePl"><div><span>previous</span><a href="/blog/how-to-build-reactjs-with-gulp/"> <!-- -->How to Build ReactJS with Gulp</a></div><div><span>next</span><a href="/blog/how-to-use-highlight-js-with-bower-and-gulp/"> <!-- -->How to Use Highlight.Js with Bower and Gulp</a></div></nav><div class="tags__StyledTags-by516m-1 bCmFPX"><span class="tags__Tag-by516m-0 EKsrG"><a href="/tags/typescript">typescript</a></span><span class="tags__Tag-by516m-0 EKsrG"><a href="/tags/javascript">javascript</a></span><span class="tags__Tag-by516m-0 EKsrG"><a href="/tags/amd">amd</a></span><span class="tags__Tag-by516m-0 EKsrG"><a href="/tags/requirejs">requirejs</a></span><span class="tags__Tag-by516m-0 EKsrG"><a href="/tags/gulp">gulp</a></span></div></div></div></main><footer class="footer__StyledFooter-sc-1bx3hj9-0 BpUiU"><div class="container__Container-wzm7r6-0 footer__FooterWrapper-sc-1bx3hj9-2 fyCFfC eQspMK"><ul class="social-links__SocialLinkList-cvpnp8-0 hKCIge"><li class="social-links__SocialLinkItem-cvpnp8-1 fpxMfM"><a href="https://youtube.com/davidwesst">youtube</a></li><li class="social-links__SocialLinkItem-cvpnp8-1 fpxMfM"><a href="https://github.com/davidwesst">github</a></li><li class="social-links__SocialLinkItem-cvpnp8-1 fpxMfM"><a href="https://twitter.com/davidwesst">twitter</a></li><li class="social-links__SocialLinkItem-cvpnp8-1 fpxMfM"><a href="https://instagram.com/davidwesst">instagram</a></li><li class="social-links__SocialLinkItem-cvpnp8-1 fpxMfM"><a href="https://facebook.com/davidwesst">facebook</a></li><li class="social-links__SocialLinkItem-cvpnp8-1 fpxMfM"><a href="https://ca.linkedin.com/in/davidwesst">linkedin</a></li></ul><p class="footer__FooterAttribution-sc-1bx3hj9-1 ctWQHz">Hand-crafted with love by<!-- --> <a href="https://twitter.com/yinkakun">Yinka Adedire</a></p></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-Q8F49XYGB9"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-Q8F49XYGB9',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-Q8F49XYGB9', {"anonymize_ip":true,"cookie_expires":0,"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/typescript-with-amd-and-gulp/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9211b675200eae0c226c.js"],"app":["/app-11ae077ca52a2b1adfa7.js"],"component---src-pages-404-js":["/component---src-pages-404-js-5e9ab522d7735ca971a5.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-0695407982e64bc599f1.js"],"component---src-pages-categories-js":["/component---src-pages-categories-js-f183adfeca35ae2c324c.js"],"component---src-pages-tags-js":["/component---src-pages-tags-js-891b5415b3b4bc7ec26a.js"],"component---src-templates-about-template-js":["/component---src-templates-about-template-js-c924c11841916ecad06e.js"],"component---src-templates-categories-template-js":["/component---src-templates-categories-template-js-d153a5f5163636c6f6c9.js"],"component---src-templates-contact-template-js":["/component---src-templates-contact-template-js-a79d686a9d69932ecd7b.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-64bbe0613139c5781bd0.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-19da77acd336faab215b.js"],"component---src-templates-tags-template-js":["/component---src-templates-tags-template-js-5a9f3c36f063c4b0aa2d.js"]};/*]]>*/</script><script src="/polyfill-9211b675200eae0c226c.js" nomodule=""></script><script src="/component---src-templates-post-template-js-19da77acd336faab215b.js" async=""></script><script src="/commons-af92040c4234d1cc890a.js" async=""></script><script src="/app-11ae077ca52a2b1adfa7.js" async=""></script><script src="/framework-2756bcb97a39e65632cd.js" async=""></script><script src="/webpack-runtime-48fc1ec7caf4d5edff8b.js" async=""></script></body></html>